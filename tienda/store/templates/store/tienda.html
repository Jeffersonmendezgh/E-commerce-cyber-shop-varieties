{% load static %}
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tienda - Productos</title>
    <link rel="stylesheet" href="{% static 'css/tienda.css' %}">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>


<!-- Título de la página -->
<section class="section-pagetop bg">
    <div class="container">
        <h2 class="title-page">Cyber Shop</h2>
    </div>
</section>

<!-- Contenido principal -->
<section class="section-content padding-y">
    <div class="container">
        
        <!-- Contador de productos -->
        <header class="border-bottom mb-4 pb-3">
            <div class="form-inline">
                <span class="mr-md-auto">
                    <b>{{ counter_products }}</b> Productos Encontrados
                </span>
            </div>
        </header>

        <!-- Grid de productos -->
        <div class="row">
            {% if products %}
                {% for product in products %}
                <div class="col-md-4 mb-4">
                    <figure class="card card-product-grid">
                        <div class="img-wrap">
                            <a href="{{ product.get_url }}">
                                <img src="{{ product.image.url }}" alt="{{ product.name }}">
                            </a>
                        </div>
                        
                        <figcaption class="info-wrap">
                            <div class="fix-height">
                                <a href="{{ product.get_url }}" class="title">
                                    {{ product.name }}
                                </a>
                                <div class="price-wrap mt-2">
                                    <span class="price">${{ product.cost }}</span>
                                </div>
                            </div>
                            <a href="{{ product.get_url }}" class="btn btn-block btn-success">
                                Ver Detalles
                            </a>
                        </figcaption>
                    </figure>
                </div>
                {% endfor %}
            {% else %}
                <div class="col-12 text-center">
                    <h2>No hay productos disponibles</h2>
                </div>
            {% endif %}
        </div>

        <!-- Paginación -->
        {% if productos.has_other_pages %}
        <nav class="mt-4" aria-label="Paginación de productos">
            <ul class="pagination justify-content-center">
                
                <!-- Botón Anterior -->
                {% if productos.has_previous %}
                    <li class="page-item">
                        <a class="page-link" href="?page={{ productos.previous_page_number }}">
                            Anterior
                        </a>
                    </li>
                {% else %}
                    <li class="page-item disabled">
                        <span class="page-link">Anterior</span>
                    </li>
                {% endif %}

                <!-- Números de página -->
                {% for num in productos.paginator.page_range %}
                    {% if productos.number == num %}
                        <li class="page-item active">
                            <span class="page-link">{{ num }}</span>
                        </li>
                    {% else %}
                        <li class="page-item">
                            <a class="page-link" href="?page={{ num }}">{{ num }}</a>
                        </li>
                    {% endif %}
                {% endfor %}

                <!-- Botón Siguiente -->
                {% if productos.has_next %}
                    <li class="page-item">
                        <a class="page-link" href="?page={{ productos.next_page_number }}">
                            Siguiente
                        </a>
                    </li>
                {% else %}
                    <li class="page-item disabled">
                        <span class="page-link">Siguiente</span>
                    </li>
                {% endif %}

            </ul>
        </nav>
        {% endif %}

    </div>
</section>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>